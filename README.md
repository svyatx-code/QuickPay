Техническое задание OOO QUICKPAY

Имеется система настроек пользователя Задача:
Реализовать систему подтверждения смены конкретной настройки пользователя по коду из смс / email / telegram с возможностью выбора пользователем другого метода Какие вы выделили бы слои, абстракции, таблицы? 
Реализуйте данную схему без интеграции конкретных сервисов / ORM / прочее на уровне интерфейсов / контроллеров.

Ответ:


Для реализации системы подтверждения смены конкретной настройки пользователя можно использовать следующую структуру:

Слои:
  Слой интерфейса (frontend): включает в себя интерфейсы пользователя (в вашем случае web-сайт).
  Слой бизнес-логики (backend): Отвечает за обработку запросов пользователя, валидацию данных, управление процессом подтверждения и взаимодействие с хранилищем данных.
  Слой доступа к данным (SQL/data table): Отвечает за доступ к базе данных или другому хранилищу данных для сохранения информации о настройках пользователя и кодах подтверждения.

Абстракции/Интерфейсы:
  UserSettingsService (Сервис настроек пользователя): Обеспечивает методы для изменения настроек пользователя и генерации кода подтверждения.
  ConfirmationService (Сервис подтверждения): Отвечает за отправку кода подтверждения по выбранному методу (SMS, email, Telegram), сохранение и проверку введённого пользователем кода.
  UserRepository (Репозиторий пользователей): Предоставляет методы для работы с данными пользователей, такие как сохранение и загрузка настроек и кодов подтверждения.

Таблицы в базе данных:
  UserSettings (Настройки пользователя): Содержит информацию о настройках каждого пользователя, включая уникальный идентификатор пользователя и его текущие настройки.
  ConfirmationCodes (Коды подтверждения): Хранит сгенерированные коды подтверждения вместе с информацией о связанном пользователе и методе доставки (SMS, email, Telegram, если необходимо или коды могут повторяться в разных сервисах). Желательно очищать таблицу время от времени.
